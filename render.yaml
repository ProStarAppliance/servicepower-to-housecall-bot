services:
  - type: web
    name: servicepower-to-housecall-bot
    env: python
    buildCommand: |
      apt-get update && apt-get install -y wget gnupg curl apt-transport-https software-properties-common
      wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | apt-key add -
      sh -c 'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" > /etc/apt/sources.list.d/google-chrome.list'
      apt-get update && apt-get install -y google-chrome-stable
      mkdir -p /opt/google/chrome
      ln -sf /usr/bin/google-chrome /opt/google/chrome/chrome
      pip install -r requirements.txt
      playwright install chrome
    startCommand: python login_servicepower.py
    plan: free
    region: oregon
    runtime: python
    branch: main
    buildFilter:
      paths:
        - "**/*.py"
        - requirements.txt
        - render.yaml
